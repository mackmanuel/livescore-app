<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>‚öΩ Upcoming Fixtures & Pattern Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 20px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: white;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    li span.pattern {
      font-weight: bold;
    }
    li span.pattern.found {
      color: green;
    }
    li span.pattern.notfound {
      color: red;
    }
  </style>
</head>
<body>

<h1>‚öΩ Upcoming Fixtures & Pattern Checker</h1>

<ul id="fixtures">
  <li>Loading fixtures...</li>
</ul>

<script>
async function loadFixtures() {
  try {
    const res = await fetch("/livescores");
    const data = await res.json();
    const matches = data.response || [];

    const ul = document.getElementById("fixtures");
    ul.innerHTML = "";

    if(matches.length === 0) {
      ul.innerHTML = "<li>‚ö†Ô∏è No upcoming fixtures.</li>";
      return;
    }

    matches.forEach(m => {
      const li = document.createElement("li");

      const date = new Date(m.fixture.date);
      const dateStr = `${date.getDate().toString().padStart(2,'0')}/` +
                      `${(date.getMonth()+1).toString().padStart(2,'0')}/` +
                      `${date.getFullYear()}, ` +
                      `${date.getHours().toString().padStart(2,'0')}:` +
                      `${date.getMinutes().toString().padStart(2,'0')}:` +
                      `${date.getSeconds().toString().padStart(2,'0')}`;

      const patternClass = m.pattern.includes("‚úÖ") ? "found" : "notfound";

      li.innerHTML = `
        üìÖ Upcoming: ${m.teams.home.name} vs ${m.teams.away.name} ‚Üí ${dateStr} 
        <span class="pattern ${patternClass}">${m.pattern}</span>
      `;

      ul.appendChild(li);
    });

  } catch(err) {
    console.error(err);
    document.getElementById("fixtures").innerHTML = "<li>‚ö†Ô∏è Error loading fixtures</li>";
  }
}

// Load fixtures on page load
loadFixtures();
</script>

</body>
</html>
